<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>Utils.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">JaCoCoverage analysis of project &quot;safestore&quot; (powered by JaCoCo from EclEmma)</a> &gt; <a href="index.source.html" class="el_package">util</a> &gt; <span class="el_source">Utils.java</span></div><h1>Utils.java</h1><pre class="source lang-java linenums">/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package util;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;

/**
 *
 * @author mira
 */
<span class="nc" id="L15">public class Utils {</span>

    /**
     * Print a matrix. The main purpose of this class is to print a Matrix for initial Debug purposes.
     *
     * @param m matrix to be printed
     * 
     */
    public static void printMatrix(int[][] m) {
        try {
<span class="nc" id="L25">            int rows = m.length;</span>
<span class="nc" id="L26">            int columns = m[0].length;</span>
<span class="nc" id="L27">            String str = &quot;|\t&quot;;</span>

<span class="nc bnc" id="L29" title="All 2 branches missed.">            for (int i = 0; i &lt; rows; i++) {</span>
<span class="nc bnc" id="L30" title="All 2 branches missed.">                for (int j = 0; j &lt; columns; j++) {</span>
<span class="nc" id="L31">                    str += m[i][j] + &quot;\t&quot;;</span>
                }

<span class="nc" id="L34">                System.out.println(str + &quot;|&quot;);</span>
<span class="nc" id="L35">                str = &quot;|\t&quot;;</span>
            }
            
        }
<span class="nc" id="L39">        catch (Exception e) {</span>
<span class="nc" id="L40">            System.out.println(&quot;Matrix is empty!!&quot;);</span>
<span class="nc" id="L41">        }</span>
<span class="nc" id="L42">    }</span>

    
    /**
     * Print a vector. This method prints a vector using the printMatrix method.
     *
     * @param m array to be printed
     */
    public static void printMatrix(int[] m) {
        try {
<span class="nc" id="L52">            int[][] teste = new int[1][m.length];</span>
<span class="nc" id="L53">            teste[0] = m;</span>
            
<span class="nc" id="L55">            Utils.printMatrix(teste);</span>

        } 
<span class="nc" id="L58">        catch (Exception e) {</span>
<span class="nc" id="L59">            System.out.println(&quot;Matrix is empty!!&quot;);</span>
<span class="nc" id="L60">        }</span>
<span class="nc" id="L61">    }</span>

    /**
     * Get the available memory of the system. This class return
     * the amount of memory the system have
     *
     * @return freememory amount of available memory
     */
    public static long getAvailableMemory() {
<span class="nc" id="L70">        Runtime runtime = Runtime.getRuntime();</span>
<span class="nc" id="L71">        long totalMemory = runtime.totalMemory(); // current heap allocated to the VM process</span>
<span class="nc" id="L72">        long freeMemory = runtime.freeMemory(); // out of the current heap, how much is free</span>
<span class="nc" id="L73">        long maxMemory = runtime.maxMemory(); // Max heap VM can use e.g. Xmx setting</span>
<span class="nc" id="L74">        long usedMemory = totalMemory - freeMemory; // how much of the current heap the VM is using</span>
<span class="nc" id="L75">        long availableMemory = maxMemory - usedMemory; // available memory i.e. Maximum heap size minus the current amount used</span>
<span class="nc" id="L76">        return availableMemory;</span>
    }

    /**
     * Convert an Int array into a Byte array. Useful for conversion between the file content
     * and the input of the Disperse function.
     *
     * @param ints int vector to be converted
     * @return byte array converted from ints array
     */
    public static byte[] intsToBytes(int[] ints) {
<span class="fc" id="L87">        byte[] byteArray = new byte[ints.length];</span>

<span class="fc bfc" id="L89" title="All 2 branches covered.">        for (int i = 0; i &lt; ints.length; i++) {</span>
<span class="fc" id="L90">            byteArray[i] = (byte) ints[i];</span>
        }

<span class="fc" id="L93">        return byteArray;</span>
    }

    /**
     * Convert a Byte array into an Int array. Useful for conversion between the output
     * of the Disperse function and the file input
     *
     * @param vbytes Byte vector to be converted
     * @return Int array converted from vbytes array
     */
    public static int[] bytesToInts(byte[] vbytes) {
<span class="fc" id="L104">        int[] intArray = new int[vbytes.length];</span>

<span class="fc bfc" id="L106" title="All 2 branches covered.">        for (int i = 0; i &lt; vbytes.length; i++) {</span>
<span class="fc" id="L107">            intArray[i] = (int) vbytes[i] &amp; (0xff);</span>
        }

<span class="fc" id="L110">        return intArray;</span>



    }

    /**
     * Transpose a matrix. Function to transpose a matrix
     *
     * @param v int matrix to be transposed
     * @return int matrix transposed
     */
    public static int[][] transposeMatrix(int[][] V) {
<span class="fc" id="L123">        int result[][] = new int[V[0].length][V.length];</span>

<span class="fc bfc" id="L125" title="All 2 branches covered.">        for (int r = 0; r &lt; V.length; r++) {</span>
<span class="fc bfc" id="L126" title="All 2 branches covered.">            for (int c = 0; c &lt; V[0].length; c++) {</span>
<span class="fc" id="L127">                result[c][r] = V[r][c];</span>
            }
        }
<span class="fc" id="L130">        return result;</span>
    }
    
    /**
     * Get only a part of a Matrix using offsets. Given a matrix and the columns and rows offsets
     * gets a new matrix only with the offsets from the previous matrix
     *
     * @param matrix input matrix to get int vector to be converteda part of
     * @param startLine line number of matrix to begin the new part matrix
     * @param offsetLine line offset of matrix to be in the new matrix
     * @param startCol column number of matrix to begin the new matrix
     * @param offsetCol columns offset of matrix to be in the new matrix
     * @return int matrix part of the original matrix
     */
    public static int[][] partOfMatrix(int[][] matrix, int startLine, int offsetLine, int startCol, int offsetCol){
<span class="nc" id="L145">        int[][] newmatrix = new int[offsetLine][offsetCol];</span>
<span class="nc bnc" id="L146" title="All 2 branches missed.">        for (int i=startLine; i&lt;offsetLine+startLine; i++){</span>
<span class="nc" id="L147">            newmatrix[i] = Arrays.copyOfRange(matrix[i], startCol, startCol+offsetCol);</span>
        }
<span class="nc" id="L149">        return newmatrix;</span>
    }
    
    /**
     * Get only a part of a Matrix using desired index. Given a matrix and the columns and rows index
     * gets a new matrix only with the index rows and columns from the previous matrix
     *
     * @param matrix input matrix to get int vector to be converted a part of
     * @param indexes  int array with the index to be used in the new matrix
     * @return int matrix part of the original matrix with the desired indexes
     */
    public static int[][] partOfMatrix(int[][] matrix, int[] indexes){
        try {
<span class="fc" id="L162">            int[][] newmatrix = new int[indexes.length][indexes.length];</span>
<span class="fc" id="L163">            int aux = 0;</span>
<span class="fc bfc" id="L164" title="All 2 branches covered.">        for (int index : indexes){</span>
<span class="fc" id="L165">            newmatrix[aux] = Utils.partOfArray(matrix[aux], indexes);</span>
<span class="fc" id="L166">            aux++;</span>
        }
<span class="fc" id="L168">        return newmatrix;</span>
<span class="nc" id="L169">        } catch (Exception e) {</span>
<span class="nc" id="L170">            System.out.println(e.getMessage());</span>
        }
<span class="nc" id="L172">        return null;</span>
    }
    
     /**
     * Get only a part of an Array using desired index. Given an Array and the columns and rows index
     * gets a new array only with the index rows and columns from the previous array
     *
     * @param array input int array to to be converted to a new array with the desired indexes
     * @param indexes  int array with the index to be used in the new array
     * @return int array part of the original array with the desired indexes
     */
    public static int[] partOfArray(int[] array, int[] indexes)
    {
<span class="fc" id="L185">        int[] newArray = new int[indexes.length];</span>
<span class="fc" id="L186">        int aux = 0;</span>
<span class="fc bfc" id="L187" title="All 2 branches covered.">        for (int index : indexes)</span>
        {
<span class="fc" id="L189">            newArray[aux] = array[index];</span>
<span class="pc bpc" id="L190" title="1 of 2 branches missed.">            if (aux &lt; newArray.length) aux++;</span>
        }
<span class="fc" id="L192">        return newArray;</span>
    }
    
    
    public static byte[] removeNulls(byte[] array) {
        byte[] newArray;
<span class="nc" id="L198">        int nnulls = 0;</span>
<span class="nc" id="L199">        int i=array.length-1;</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">        while (array[i] == 0x00) {</span>
<span class="nc" id="L201">            nnulls++;</span>
<span class="nc" id="L202">            i--;</span>
        }
<span class="nc bnc" id="L204" title="All 2 branches missed.">        if (nnulls &gt; 0) {</span>
<span class="nc" id="L205">            newArray = Arrays.copyOf(array, array.length-nnulls);</span>
<span class="nc" id="L206">            return newArray;</span>
        }
<span class="nc" id="L208">        else return array;</span>
        
        
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.6.4.201312101107</span></div></body></html>